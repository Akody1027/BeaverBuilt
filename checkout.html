<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Your Cart | Beaver Built Furniture</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Material Icons -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />

  <style>
    /* Reset & Base */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: Arial, sans-serif; background: #f9f9f9; color: #333; padding: 20px; }
    a { color: inherit; text-decoration: none; }

    header {
      display: flex; align-items: center; margin-bottom: 20px;
    }
    .icon-btn {
      font-size: 1.5rem; margin-right: 10px; cursor: pointer;
      display: inline-flex; align-items: center; justify-content: center;
      width: 32px; height: 32px; color: #1f2937;
    }
    header h1 {
      font-size: 1.5rem; font-weight: normal;
      flex: 1;
    }

    .cart-list {
      width: 100%; border-collapse: collapse; margin-bottom: 20px;
    }
    .cart-list th, .cart-list td {
      padding: 10px; text-align: left; border-bottom: 1px solid #e0e0e0;
    }
    .cart-list th { font-weight: 600; text-transform: uppercase; font-size: 0.85rem; color: #555; }
    .cart-list img {
      width: 50px; height: 50px; object-fit: cover; border-radius: 4px;
    }

    .quantity-controls {
      display: flex; align-items: center;
    }
    .quantity-controls button {
      width: 24px; height: 24px; background: #e0e0e0; border: none;
      border-radius: 4px; font-size: 1rem; line-height: 0; cursor: pointer;
      margin: 0 5px;
    }
    .quantity-controls span {
      min-width: 20px; text-align: center; display: inline-block;
    }

    .totals {
      display: flex; justify-content: flex-end; margin-bottom: 30px;
      font-size: 1.1rem; font-weight: 600;
    }
    .totals span:last-child { margin-left: 10px; }

    .checkout-btn {
      display: block; width: 100%; max-width: 300px; margin: 0 auto;
      padding: 12px; background: #1f2937; color: #fff;
      text-align: center; border: none; border-radius: 6px;
      font-size: 1rem; cursor: pointer;
    }
    .checkout-btn:hover { background: #374151; }
  </style>
</head>
<body>

  <header>
    <!-- Home button -->
    <a href="index.html" class="icon-btn" title="Home">
      <span class="material-icons">home</span>
    </a>
    <!-- Back button -->
    <span class="material-icons icon-btn" onclick="history.back()" title="Back">arrow_back</span>
    <h1>Your Cart</h1>
  </header>

  <table class="cart-list">
    <thead>
      <tr>
        <th>Item</th>
        <th>Price</th>
        <th>Qty</th>
        <th>Subtotal</th>
      </tr>
    </thead>
    <tbody id="cart-body">
      <!-- JS injects rows here -->
    </tbody>
  </table>

  <div class="totals">
    <span>Total:</span><span id="cart-total">$0.00</span>
  </div>

  <button class="checkout-btn" id="to-checkout">Proceed to Checkout</button>

  <script>
    // Load cart from localStorage
    let cart = JSON.parse(localStorage.getItem('bbf_cart')||'[]');

    const cartBody = document.getElementById('cart-body');
    const totalEl  = document.getElementById('cart-total');

    function renderCart() {
      cartBody.innerHTML = '';
      let total = 0;
      cart.forEach(item => {
        const sub = item.price * item.qty;
        total += sub;
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>
            <img src="${item.img}" alt="" />
            ${item.itemNum}
          </td>
          <td>$${item.price.toFixed(2)}</td>
          <td>
            <div class="quantity-controls">
              <button class="dec" data-id="${item.itemNum}">âˆ’</button>
              <span>${item.qty}</span>
              <button class="inc" data-id="${item.itemNum}">+</button>
            </div>
          </td>
          <td>$${sub.toFixed(2)}</td>
        `;
        cartBody.appendChild(tr);
      });
      totalEl.textContent = '$' + total.toFixed(2);
      attachQtyHandlers();
    }

    function attachQtyHandlers() {
      document.querySelectorAll('.inc').forEach(btn => {
        btn.onclick = () => adjustQty(btn.dataset.id, +1);
      });
      document.querySelectorAll('.dec').forEach(btn => {
        btn.onclick = () => adjustQty(btn.dataset.id, -1);
      });
    }

    function adjustQty(id, delta) {
      const idx = cart.findIndex(i=>i.itemNum==id);
      if (idx===-1) return;
      cart[idx].qty += delta;
      if (cart[idx].qty < 1) cart.splice(idx,1);
      localStorage.setItem('bbf_cart', JSON.stringify(cart));
      renderCart();
    }

    // initial render
    renderCart();

    // proceed to checkout
    document.getElementById('to-checkout').onclick = () => {
      window.location.href = 'checkout.html';
    };
  </script>

</body>
</html>
